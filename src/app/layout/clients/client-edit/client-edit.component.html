<div>
    <app-page-header [heading]="'Edit user'" [icon]="'fa-user'"
                     [parents]="[ { heading: 'Users', link: '/clients', icon: 'users' } ]"></app-page-header>

    <form (ngSubmit)="onSubmit(createForm)" *ngIf="client" #createForm="ngForm">
        <div class="row">
            <div class="col-md-6">
                <fieldset class="form-group">
                    <label>Name</label>
                    <input class="form-control" [(ngModel)]="client.name" name="name" required>
                </fieldset>

                <button type="submit" class="btn btn-primary" [disabled]="createForm.invalid || loading">Save</button>
                <div class="alert alert-primary" role="alert">
                    Some exchanges require enabling API key and confirming by email. Make sure keys you provide are
                    enabled
                </div>
                <div class="alert alert-primary" role="alert">
                    Keys should have following permissions: read balance, read user transactions, create/cancel buy and sell limit order, get open orders. Add keys without permission for withdrawing from exchange, autocoin does not need them
                </div>
            </div>
            <div class="col-md-6">
                <ngb-accordion [closeOthers]="false">
                    <ngb-panel *ngFor="let exchange of exchanges">
                        <ng-template ngbPanelTitle>
                            {{ exchange.name }}
                            <span class="badge badge-info" *ngIf="isExchangeKeyFilled(exchange)">Filled</span>
                        </ng-template>
                        <ng-template ngbPanelContent>

                            <div ngModelGroup="exchangesKeys">

                                <fieldset class="form-group" [ngModelGroup]="exchange.id">
                                    <label>API Key</label>
                                    <input class="form-control" name="apiKey" ngModel>
                                </fieldset>

                                <fieldset class="form-group" [ngModelGroup]="exchange.id">
                                    <label>Secret Key</label>
                                    <input class="form-control" name="secretKey" ngModel>
                                </fieldset>

                            </div>

                        </ng-template>
                    </ngb-panel>
                </ngb-accordion>
            </div>
        </div>
    </form>
</div>
