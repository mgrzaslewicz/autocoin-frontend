<div class="col-12">
    <div>
        Showing {{profitOpportunities.length}} of {{totalNumberOfUnfilteredOpportunities}} opportunities
    </div>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th scope="col">Profit %<i class="fa fa-arrow-down" aria-hidden="true"></i></th>
                <th scope="col">$Profit</th>
                <th scope="col">Currency pair</th>
                <th scope="col">Buy at</th>
                <th scope="col">price <i class="fa fa-arrow-right" aria-hidden="true"></i></th>
                <th scope="col">Sell at</th>
                <th scope="col">price</th>
                <th scope="col">
                    <span class="badge bg-success text-light mr-1">available</span>
                    <span class="badge bg-danger text-light">not available</span>
                    <div>fees in calculation</div>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let profitOpportunity of profitOpportunities">
                <ng-container *ngIf="profitOpportunityAtSelectedUsdDepth(profitOpportunity); let profitOpportunityAtSelectedUsdDepth">
                    <th scope="row">
                        {{profitOpportunityAtSelectedUsdDepth.relativeProfitPercent}} %
                        <div>
                            <button (click)="twoLegArbitrageOpportunityDialog.showOpportunityDetails(profitOpportunity, profitOpportunityAtSelectedUsdDepth)"
                                    class="btn btn-sm btn-info">
                                <i class="fa fa-info-circle" aria-hidden="true"></i>
                            </button>
                        </div>
                    </th>
                    <th scope="row">
                        <div>${{profitOpportunityAtSelectedUsdDepth.profitUsd}}</div>
                    </th>
                    <td>
                        {{profitOpportunity.baseCurrency}}/{{profitOpportunity.counterCurrency}}
                    </td>
                    <td>
                        <div *ngIf="hasBuyAtLink(profitOpportunity)">
                            <a [href]="getBuyAtLink(profitOpportunity)" target="_blank">
                                {{profitOpportunity.buyAtExchange}}
                            </a>
                        </div>
                        <div *ngIf="!hasBuyAtLink(profitOpportunity)">
                            {{profitOpportunity.buyAtExchange}}
                        </div>
                        <div>
                            Max {{profitOpportunityAtSelectedUsdDepth.buyAmount}} {{profitOpportunity.baseCurrency}}
                        </div>
                    </td>
                    <td>
                        <div>
                            {{profitOpportunityAtSelectedUsdDepth.buyPrice}}
                        </div>
                    </td>
                    <td>
                        <div *ngIf="profitOpportunity.areDetailsHidden">
                            <span class="badge badge-warning">Full details available in Pro version</span>
                        </div>
                        <div *ngIf="!profitOpportunity.areDetailsHidden">
                            <div *ngIf="hasSellAtLink(profitOpportunity)">
                                <a [href]="getSellAtLink(profitOpportunity)" target="_blank">
                                    {{profitOpportunity.sellAtExchange}}
                                </a>
                            </div>
                            <div *ngIf="!hasSellAtLink(profitOpportunity)">
                                {{profitOpportunity.sellAtExchange}}
                            </div>
                        </div>
                    </td>
                    <td>
                        <div>
                            {{profitOpportunityAtSelectedUsdDepth.sellPrice}}
                        </div>
                    </td>
                    <td>
                        <span
                            [className]="profitOpportunityAtSelectedUsdDepth.fees.buyFee != null ? 'badge bg-success text-light mr-1' : 'badge bg-danger text-light mr-1'">
                            buy
                        </span>
                        <span
                            [className]="profitOpportunityAtSelectedUsdDepth.fees.withdrawalFee != null ? 'badge bg-success text-light mr-1' : 'badge bg-danger text-light mr-1'">
                        withdraw
                    </span>
                        <span
                            [className]="profitOpportunityAtSelectedUsdDepth.fees.sellFee != null ? 'badge bg-success text-light' : 'badge bg-danger text-light'">
                        sell
                    </span>
                        <div class="empty-invisible-line" aria-hidden="true">
                            empty invisible line
                        </div>
                    </td>
                </ng-container>

            </tr>
            </tbody>
        </table>
    </div>
</div>

<app-two-leg-arbitrage-opportunity-dialog #twoLegArbitrageOpportunityDialog></app-two-leg-arbitrage-opportunity-dialog>
